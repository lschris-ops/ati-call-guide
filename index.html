<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ATI Call Guide â€” Tier II Phone</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: #f0f4f8;
  color: #2d3748;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.header {
  background: #276749;
  color: white;
  padding: 11px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 2px 8px rgba(0,0,0,0.25);
}
.header h1 { font-size: 1rem; font-weight: 700; letter-spacing: 0.4px; }
.header-right { display: flex; align-items: center; gap: 10px; }
.badge {
  background: rgba(255,255,255,0.2);
  border-radius: 12px;
  padding: 3px 10px;
  font-size: 0.72rem;
  font-weight: 600;
}
.reset-btn-top {
  background: rgba(255,255,255,0.15);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  border-radius: 6px;
  padding: 4px 12px;
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
}
.reset-btn-top:hover { background: rgba(255,255,255,0.25); }

/* â”€â”€ Rules bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.rules-bar {
  background: #e6fffa;
  border-bottom: 2px solid #b2f5ea;
  padding: 10px 20px;
  font-size: 0.95rem;
  color: #234e52;
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
  align-items: center;
}
.rules-bar strong { color: #276749; }
.rules-divider { color: #b2f5ea; }

/* â”€â”€ Main â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.main {
  flex: 1;
  max-width: 820px;
  width: 100%;
  margin: 0 auto;
  padding: 16px 16px 8px;
}

/* â”€â”€ Nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.nav-row { display: flex; gap: 8px; margin-bottom: 12px; }
.btn-nav {
  background: white;
  border: 1px solid #cbd5e0;
  border-radius: 6px;
  padding: 6px 14px;
  font-size: 0.78rem;
  cursor: pointer;
  color: #4a5568;
  font-weight: 600;
}
.btn-nav:hover { background: #f7fafc; border-color: #a0aec0; }

/* â”€â”€ Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card {
  background: white;
  border-radius: 10px;
  padding: 18px 20px;
  margin-bottom: 12px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.08);
}
.card-title {
  font-size: 1rem;
  font-weight: 700;
  margin-bottom: 14px;
  color: #276749;
}

/* â”€â”€ ADmini box â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.admini-box {
  background: #faf5ff;
  border: 1px solid #d6bcfa;
  border-radius: 8px;
  padding: 10px 14px;
  font-size: 0.82rem;
  color: #44337a;
  margin-bottom: 14px;
  line-height: 1.5;
}
.admini-box strong { color: #553c9a; }
.admini-box .not-for {
  margin-top: 6px;
  color: #c53030;
  font-size: 0.76rem;
  font-weight: 600;
}

/* â”€â”€ Decision buttons â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.decision-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.btn-decision {
  padding: 16px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-size: 0.88rem;
  font-weight: 700;
  text-align: left;
  transition: all 0.15s;
  line-height: 1.4;
}
.btn-decision:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,0,0,0.15); }
.btn-decision:active { transform: translateY(0); }
.btn-cg { background: #276749; color: white; }
.btn-br { background: #c53030; color: white; }
.btn-decision .d-sub { font-size: 0.76rem; font-weight: 400; opacity: 0.88; margin-top: 4px; }

/* â”€â”€ Scenario grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.scenario-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.btn-scenario {
  padding: 12px 14px;
  background: #f7fafc;
  border: 2px solid #e2e8f0;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  text-align: left;
  transition: all 0.15s;
  line-height: 1.4;
  color: #2d3748;
}
.btn-scenario:hover { border-color: #276749; background: #f0fff4; }
.btn-scenario.track-c { border-color: #fc8181; background: #fff5f5; color: #742a2a; }
.btn-scenario.track-c:hover { border-color: #c53030; background: #fee2e2; }
.btn-scenario .s-sub { font-size: 0.73rem; font-weight: 400; color: #718096; margin-top: 3px; }
.btn-scenario.track-c .s-sub { color: #c53030; }

/* â”€â”€ Script box â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.script-box {
  background: #ebf8ff;
  border-left: 4px solid #3182ce;
  border-radius: 0 8px 8px 0;
  padding: 14px 16px;
  margin: 12px 0;
  font-size: 0.9rem;
  line-height: 1.7;
  color: #1a365d;
}
.script-label {
  font-size: 0.68rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #3182ce;
  margin-bottom: 7px;
}
.script-text { font-style: italic; }
.script-box.track-c { background: #fff5f5; border-left-color: #c53030; color: #742a2a; }
.script-box.track-c .script-label { color: #c53030; }

/* â”€â”€ Section label â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.section-label {
  font-size: 0.68rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #718096;
  margin: 14px 0 7px;
}

/* â”€â”€ Checklist â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.checklist-item {
  display: flex;
  align-items: flex-start;
  gap: 9px;
  padding: 7px 0;
  font-size: 0.85rem;
  border-bottom: 1px solid #f0f4f8;
  line-height: 1.5;
}
.checklist-item:last-child { border-bottom: none; }
.check-num {
  background: #276749;
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.68rem;
  font-weight: 700;
  flex-shrink: 0;
  margin-top: 1px;
}
.check-num.warn { background: #c53030; }

/* â”€â”€ Rebuttals â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.rebuttals-section { margin-top: 14px; }
.rebuttal-header {
  font-size: 0.68rem;
  font-weight: 700;
  color: #744210;
  margin-bottom: 7px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.rebuttal-item {
  border: 1px solid #fbd38d;
  border-radius: 8px;
  margin-bottom: 7px;
  overflow: hidden;
}
.rebuttal-item.is-warning { border-color: #fc8181; }
.rebuttal-trigger {
  padding: 10px 14px;
  background: #fffaf0;
  cursor: pointer;
  font-size: 0.83rem;
  font-weight: 600;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: #744210;
  user-select: none;
}
.rebuttal-item.is-warning .rebuttal-trigger { background: #fff5f5; color: #742a2a; }
.rebuttal-trigger:hover { filter: brightness(0.97); }
.rebuttal-arrow { transition: transform 0.2s; font-size: 0.65rem; }
.rebuttal-item.open .rebuttal-arrow { transform: rotate(180deg); }
.rebuttal-body {
  display: none;
  padding: 12px 14px;
  background: #fffdf5;
  font-size: 0.85rem;
  line-height: 1.65;
  color: #1a202c;
  border-top: 1px solid #fbd38d;
  font-style: italic;
}
.rebuttal-item.is-warning .rebuttal-body {
  background: #fff5f5;
  border-top-color: #fc8181;
  color: #742a2a;
  font-style: normal;
  font-weight: 600;
}
.rebuttal-item.open .rebuttal-body { display: block; }

/* â”€â”€ Warning box â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.warning-box {
  background: #fff5f5;
  border: 1px solid #feb2b2;
  border-radius: 8px;
  padding: 11px 14px;
  margin-top: 12px;
}
.warning-box .warning-label {
  font-size: 0.68rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: #c53030;
  margin-bottom: 6px;
}
.warning-item {
  font-size: 0.8rem;
  color: #742a2a;
  padding: 3px 0;
  display: flex;
  gap: 6px;
}
.warning-item::before { content: "âœ—"; color: #e53e3e; font-weight: 700; flex-shrink: 0; }

/* â”€â”€ Track badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.track-badge {
  display: inline-block;
  border-radius: 6px;
  padding: 3px 10px;
  font-size: 0.72rem;
  font-weight: 700;
  border: 1px solid;
}
.track-badge.a { background: #f0fff4; color: #276749; border-color: #276749; }
.track-badge.b { background: #ebf8ff; color: #2b6cb0; border-color: #2b6cb0; }
.track-badge.c { background: #fff5f5; color: #c53030; border-color: #c53030; }

/* â”€â”€ Bottom warnings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.bottom-warnings {
  background: #fff5f5;
  border-top: 2px solid #fc8181;
  padding: 12px 20px;
  font-size: 0.95rem;
}
.bw-title {
  font-weight: 700;
  color: #c53030;
  margin-bottom: 8px;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.bw-items { display: flex; flex-wrap: wrap; gap: 6px; }
.bw-item {
  background: white;
  border: 1px solid #feb2b2;
  border-radius: 4px;
  padding: 4px 10px;
  color: #742a2a;
  font-size: 0.88rem;
}
.bw-item::before { content: "âœ— "; color: #e53e3e; font-weight: 700; }

/* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (max-width: 520px) {
  .scenario-grid { grid-template-columns: 1fr; }
  .decision-grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<div class="header">
  <h1>ğŸŒ¿ ATI Call Guide</h1>
  <div class="header-right">
    <span class="badge">Tier II Phone</span>
    <button class="reset-btn-top" onclick="reset()">â†º Start Over</button>
  </div>
</div>

<div class="rules-bar">
  <span><strong>Timeframe:</strong> Sun up to sun down</span>
  <span class="rules-divider">|</span>
  <span><strong>ADmini:</strong> Call ticket â†’ Apps â†’ CX Info â†’ Schedule Decision</span>
  <span class="rules-divider">|</span>
  <span><strong>Scope:</strong> Lawn Mowing only â€” not MQ/IQ, fixes, or disputes</span>
</div>

<div class="main" id="app"></div>

<div class="bottom-warnings">
  <div class="bw-title">âŒ Never say on any ATI call</div>
  <div class="bw-items">
    <span class="bw-item">"There's nothing I can do about the time"</span>
    <span class="bw-item">"The pro has their own schedule"</span>
    <span class="bw-item">"You can check the app" as the only option</span>
    <span class="bw-item">Repeat the same policy twice without a next step</span>
    <span class="bw-item">Offer credit or expedited booking</span>
    <span class="bw-item">Give or share the pro's phone number</span>
    <span class="bw-item">Offer to leave a note reminding pro to notify customer on arrival</span>
  </div>
</div>

<script>
let state = { step: 'admini', decision: null, scenario: null };

function reset() {
  state = { step: 'admini', decision: null, scenario: null };
  render();
}
function goBack() {
  if (state.step === 'script')        { state.step = 'scenario'; state.scenario = null; }
  else if (state.step === 'br')       { state.step = 'admini';   state.decision = null; }
  else if (state.step === 'scenario') { state.step = 'admini';   state.decision = null; }
  render();
}
function selectDecision(d) {
  state.decision = d;
  state.step = d === 'br' ? 'br' : 'scenario';
  render();
}
function selectScenario(id) {
  state.scenario = id;
  state.step = 'script';
  render();
}
function toggleRebuttal(el) { el.classList.toggle('open'); }

// â”€â”€ Scenarios â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const scenarios = [
  {
    id: 'eta',
    label: '"When is my pro coming today?"',
    sub: 'Same-day ETA inquiry',
    track: 'A',
    adminiNote: 'Customer Guidance â€” confirm service is scheduled for today',
    script: 'Your service is scheduled for [date]. While I\'m unable to provide a specific or estimated arrival time for your pro, our pros work from sun up to sun down. I also recommend reaching out to your pro through Inbox by logging into our app or website â€” that\'s the best way to get a response and stay up-to-date with your service.',
    steps: [
      { text: 'Acknowledge first â€” "I completely understand, you want to plan your day around this."', warn: false },
      { text: 'Confirm service is scheduled for today â€” sun up to sun down is the timeframe', warn: false },
      { text: 'Direct to Inbox in app/website â€” this is the direct line to the pro', warn: false },
      { text: 'Reassure them they do not need to be home â€” just unlock gates and keep pets indoors', warn: false },
    ],
    rebuttals: [
      {
        trigger: '"Can you give me at least an ETA?"',
        response: 'I completely understand how frustrating it can be. We\'re not able to monitor the pro\'s route, but your service is confirmed and hasn\'t been rescheduled or cancelled. The best way to get a direct update is to message your pro through the Inbox in our app or website â€” your message goes straight to them.',
      },
    ],
  },
  {
    id: 'future',
    label: '"What time on [future date]?"',
    sub: 'Pre-service date inquiry',
    track: 'B',
    adminiNote: 'Customer Guidance â€” confirm service for that date',
    script: 'For [date], your pro is confirmed and they work sun up to sun down. If you\'d like to reach out to your pro ahead of time, you can message them directly through the Inbox in our app or website.',
    steps: [
      { text: 'Confirm service is scheduled for that date', warn: false },
      { text: 'Sun up to sun down is the timeframe â€” we can\'t provide a more specific time', warn: false },
      { text: 'Direct to Inbox to message the pro directly if they want to follow up', warn: false },
      { text: 'Reassure them they do not need to be home â€” just unlock gates and keep pets indoors', warn: false },
    ],
    rebuttals: [
      {
        trigger: '"Can\'t you give a more specific time?"',
        response: 'I completely understand â€” unfortunately we\'re not able to provide a specific time or ETA. Our pros work sun up to sun down and manage their own routes. The most direct way to follow up with your pro is through the Inbox in our app or website.',
      },
    ],
  },
  {
    id: 'otw',
    label: 'Got OTW message â€” pro still not here',
    sub: 'Customer confused by on-the-way notification',
    track: 'A',
    adminiNote: 'Customer Guidance â€” verify no reschedule or cancellation in admin',
    script: 'I completely understand the confusion and I\'m really sorry about that. The on-the-way message your pro sent is actually their way of confirming that they will be completing your lawn mowing service today. Your schedule is still confirmed and hasn\'t been rescheduled or cancelled. While we\'re not able to monitor the pro\'s exact route, rest assured your service is still active for today.',
    steps: [
      { text: 'Apologize for the confusion â€” acknowledge it genuinely', warn: false },
      { text: 'Explain the OTW message is the pro\'s confirmation that they\'re coming today, not a real-time location', warn: false },
      { text: 'Check admin â€” confirm no reschedule or cancellation', warn: false },
      { text: 'Reassure service is confirmed and still active for today', warn: false },
      { text: 'Direct to Inbox if they want to follow up directly with the pro', warn: false },
    ],
    rebuttals: [
      {
        trigger: '"But they said they\'re on the way and they\'re still not here"',
        response: 'I completely understand, and I\'m truly sorry for the confusion that message caused. The on-the-way message is how pros confirm they\'ll be completing your service today â€” it\'s not a real-time location update. Your service is still confirmed and active. If you\'d like to follow up directly, you can message your pro through the Inbox in our app or website.',
      },
      {
        trigger: '"It\'s almost sundown and they\'re still not here"',
        response: 'I understand how concerning that is, and I\'m sorry. Let me check your account right now. [Check admin â€” confirm schedule is still active, no reschedule or cancellation.] Your service is still confirmed. Please message your pro through the Inbox in our app or website to follow up directly.',
      },
    ],
  },
  {
    id: 'noshow',
    label: 'âš  Pro is late / hasn\'t shown up',
    sub: 'Customer has been waiting â€” highest frustration',
    track: 'C',
    isHighPriority: true,
    adminiNote: 'Check admin â€” confirm schedule is still active, no reschedule or cancellation',
    script: 'I\'m sorry you\'ve been waiting â€” let me look into this right now.',
    steps: [
      { text: 'âš  Lead with empathy first â€” NOT the sun up to sun down timeframe', warn: true },
      { text: 'Check admin â€” is the schedule still active? Any reschedule or cancellation?', warn: false },
      { text: 'Confirm to the customer that the schedule is still active and the pro is still assigned', warn: false },
      { text: 'Direct to Inbox â€” the customer can message the pro directly for an update', warn: false },
      { text: 'âš  No BR, no credit â€” confirming the schedule is active is the only action here', warn: true },
    ],
    rebuttals: [
      {
        trigger: '"This keeps happening" / "I\'m tired of waiting"',
        response: 'You\'re right to be frustrated, and I\'m truly sorry. I\'ve checked your account and your service is still confirmed â€” your pro is still assigned to your property. The best thing I can suggest right now is to message your pro directly through the Inbox in our app or website so you can get an update from them directly.',
      },
      {
        trigger: '"I want to cancel"',
        response: 'âš  This is now a retention call â€” stop the ATI script and shift to the cancel/retention track immediately.',
        isWarning: true,
      },
    ],
  },
  {
    id: 'messaging',
    label: 'Messaging pro â€” no response',
    sub: 'Customer sent messages, pro not replying',
    track: 'A',
    adminiNote: 'Customer Guidance â€” reassure service is confirmed, reinforce Inbox',
    script: 'I completely understand how frustrating it can be when you haven\'t heard back from your pro yet, and I\'m really sorry for the inconvenience. Our pros do have multiple properties to care for during the day, but please rest assured that your service is still confirmed and your pro has until sundown to complete it.',
    steps: [
      { text: 'Acknowledge the frustration with genuine empathy', warn: false },
      { text: 'Explain pros are managing multiple properties â€” not ignoring the message', warn: false },
      { text: 'Reassure service is confirmed and still active', warn: false },
      { text: 'Encourage continued use of Inbox â€” it\'s a direct message to the pro', warn: false },
    ],
    rebuttals: [
      {
        trigger: 'Messaged days before service, still no reply',
        response: 'I understand â€” and I\'m sorry the message hasn\'t been answered yet. Our pros aren\'t always on their phones between jobs. Rest assured your service for [date] is still scheduled and confirmed.',
      },
    ],
  },
  {
    id: 'talk',
    label: 'Wants to speak with pro / leave instructions',
    sub: 'Special instructions or concerns before service',
    track: 'A',
    adminiNote: 'Customer Guidance â€” direct to Inbox or add job note',
    script: 'If there\'s anything specific you\'d like the pro to focus on, like certain areas to mow or any special instructions, you can send a message directly to your pro through the Inbox in our app or website. I\'d also be happy to add a note to your account right now. May I ask what instructions you\'d like me to include?',
    steps: [
      { text: 'Reassure they do NOT need to be home â€” just unlock gates and keep pets indoors', warn: false },
      { text: 'Direct to Inbox in app/website â€” direct message to the pro', warn: false },
      { text: 'Offer to add a job/subscription note yourself right now', warn: false },
      { text: 'âš  Do NOT add a note reminding the pro to notify the customer upon arrival', warn: true },
    ],
    rebuttals: [
      {
        trigger: '"Can you give me the pro\'s phone number?"',
        response: 'I\'m not able to share the pro\'s direct number â€” we follow data privacy standards to protect both customers and pros. The best way to reach them is through the Inbox in our app or website. Messages go straight to the pro, and I can also add a note to your account right now if you\'d like.',
      },
    ],
  },
  {
    id: 'exact',
    label: 'Insisting on an exact arrival time',
    sub: 'Won\'t accept sun up to sun down',
    track: 'A',
    adminiNote: 'Customer Guidance â€” sun up to sun down, push Inbox',
    script: 'I completely understand how frustrating it can be not to have a specific time, and I\'m really sorry for that. Unfortunately, we\'re not able to provide an exact time or ETA â€” our pros work sun up to sun down and manage their own routes. The most direct way to get an update is to message your pro through the Inbox in our app or website, as messages go straight to them.',
    steps: [
      { text: 'Lead with genuine empathy â€” don\'t skip this', warn: false },
      { text: 'Be clear: we cannot provide an exact time or ETA', warn: false },
      { text: 'Sun up to sun down is the only timeframe â€” explain pros manage their own routes', warn: false },
      { text: 'Push Inbox firmly â€” it\'s the only direct line to the pro', warn: false },
    ],
    rebuttals: [
      {
        trigger: '"That\'s not acceptable â€” I need to plan my day"',
        response: 'I completely understand, and I\'m sorry we can\'t give you a more specific time. Here\'s what I\'d suggest: you actually don\'t need to be home for the service at all. Just make sure your gates are unlocked and your pets are indoors â€” that way you can go about your day and the pro can start as soon as they arrive. If you\'d like to follow up with your pro directly, please use the Inbox in our app or website.',
      },
      {
        trigger: 'Customer still pushing after second explanation',
        response: 'âš  Stop repeating â€” break the loop. "I completely hear you, and I wish I could give you more. The Inbox is truly the only direct line to your pro right now. I\'d encourage you to send them a message there."',
        isWarning: true,
      },
    ],
  },
];

// â”€â”€ Render functions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAdmini() {
  return `
    <div class="card">
      <div class="card-title">Step 1 â€” Check ADmini Schedule Decision</div>
      <div class="admini-box">
        <strong>How to access:</strong> Open call ticket â†’ <strong>Apps</strong> (left panel) â†’ <strong>CX Info</strong> â†’ scroll to <strong>Schedule Decision</strong>
        <div class="not-for">âš  Lawn Mowing only â€” do NOT use for: MQ/IQ additional services Â· Mowing fix schedule Â· Lawn mowing disputes</div>
      </div>
      <div style="font-size:0.78rem;color:#718096;margin-bottom:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.5px;">What does Schedule Decision show?</div>
      <div class="decision-grid">
        <button class="btn-decision btn-cg" onclick="selectDecision('cg')">
          âœ“ Customer Guidance
          <div class="d-sub">Confirm scheduled service to the customer</div>
        </button>
        <button class="btn-decision btn-br" onclick="selectDecision('br')">
          âš¡ Bulk Redistribute
          <div class="d-sub">A new pro needs to be assigned</div>
        </button>
      </div>
    </div>
  `;
}

function renderBR() {
  return `
    <div class="nav-row">
      <button class="btn-nav" onclick="goBack()">â† Back</button>
    </div>
    <div class="card">
      <div class="card-title">âš¡ Bulk Redistribute</div>
      <div class="script-box">
        <div class="script-label">ğŸ“¢ Say this</div>
        <div class="script-text">I've arranged for a new Pro to take care of your service for [date] and this may take up to 48 hours. Once your Pro is confirmed, you'll receive a notification via email and SMS so you can stay updated.</div>
      </div>
      <div class="section-label">Action checklist</div>
      <div>
        <div class="checklist-item"><span class="check-num">1</span><span>Confirm redistribution has been triggered in ADmini</span></div>
        <div class="checklist-item"><span class="check-num">2</span><span>Tell customer new pro assignment may take up to <strong>48 hours</strong></span></div>
        <div class="checklist-item"><span class="check-num">3</span><span>Confirm they'll receive an email + SMS notification once a new pro is assigned</span></div>
        <div class="checklist-item"><span class="check-num warn">!</span><span>If redistribution is not applicable â€” take a screenshot and include it in internal notes</span></div>
      </div>
    </div>
  `;
}

function renderScenarios() {
  const buttons = scenarios.map(s => `
    <button class="btn-scenario ${s.isHighPriority ? 'track-c' : ''}" onclick="selectScenario('${s.id}')">
      <div>${s.label}</div>
      <div class="s-sub">${s.sub}</div>
    </button>
  `).join('');
  return `
    <div class="nav-row">
      <button class="btn-nav" onclick="goBack()">â† Back</button>
    </div>
    <div class="card">
      <div class="card-title">Step 2 â€” What is the customer's situation?</div>
      <div class="scenario-grid">${buttons}</div>
    </div>
  `;
}

function renderScript() {
  const s = scenarios.find(x => x.id === state.scenario);
  if (!s) return '';
  const trackClass = s.track.toLowerCase();
  const steps = s.steps.map((step, i) => `
    <div class="checklist-item">
      <span class="check-num ${step.warn ? 'warn' : ''}">${step.warn ? '!' : i + 1}</span>
      <span>${step.text}</span>
    </div>
  `).join('');
  const rebuttals = s.rebuttals.map(r => `
    <div class="rebuttal-item ${r.isWarning ? 'is-warning' : ''}" onclick="toggleRebuttal(this)">
      <div class="rebuttal-trigger">
        <span>ğŸ’¬ ${r.trigger}</span>
        <span class="rebuttal-arrow">â–¼</span>
      </div>
      <div class="rebuttal-body">${r.response}</div>
    </div>
  `).join('');
  return `
    <div class="nav-row">
      <button class="btn-nav" onclick="goBack()">â† Scenarios</button>
    </div>
    <div class="card">
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px;">
        <span class="track-badge ${trackClass}">Track ${s.track}</span>
        <div style="font-size:0.95rem;font-weight:700;color:#2d3748;">${s.label}</div>
      </div>
      <div class="admini-box"><strong>ADmini:</strong> ${s.adminiNote}</div>
      <div class="script-box ${s.isHighPriority ? 'track-c' : ''}">
        <div class="script-label">ğŸ“¢ Say this first</div>
        <div class="script-text">${s.script}</div>
      </div>
      <div class="section-label">Action steps</div>
      <div>${steps}</div>
      ${rebuttals ? `
        <div class="rebuttals-section">
          <div class="rebuttal-header">ğŸ’¬ Rebuttals â€” tap to expand</div>
          ${rebuttals}
        </div>
      ` : ''}
    </div>
  `;
}

function render() {
  const app = document.getElementById('app');
  window.scrollTo(0, 0);
  switch (state.step) {
    case 'admini':   app.innerHTML = renderAdmini();    break;
    case 'br':       app.innerHTML = renderBR();        break;
    case 'scenario': app.innerHTML = renderScenarios(); break;
    case 'script':   app.innerHTML = renderScript();    break;
  }
}

render();
</script>
</body>
</html>
